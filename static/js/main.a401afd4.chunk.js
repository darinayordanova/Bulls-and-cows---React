(this["webpackJsonpbulls-and-cows"]=this["webpackJsonpbulls-and-cows"]||[]).push([[0],{38:function(e,t,n){e.exports=n(54)},43:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(32),l=n.n(s),o=(n(43),n(11)),u=n(14),i=r.a.createContext(null),c=n(4),m=n(6),h=n(8),p=n(7),d=n(9),g=r.a.createContext(null),b=function(e){return function(t){return r.a.createElement(g.Consumer,null,(function(n){return r.a.createElement(e,Object.assign({},t,{firebase:n}))}))}},f=g,E=n(10),v=n(21),S=n.n(v),w=(n(44),n(46),{apiKey:"AIzaSyB8ti3g6Qt4dQMlbSv6ejimRl9ZdsA0fgo",authDomain:"bulls-and-cows-softuni-bbb29.firebaseapp.com",databaseURL:"https://bulls-and-cows-softuni-bbb29.firebaseio.com",projectId:"bulls-and-cows-softuni-bbb29",storageBucket:"bulls-and-cows-softuni-bbb29.appspot.com",messagingSenderId:"1066617555490"}),O=function e(){var t=this;Object(c.a)(this,e),this.doCreateUserWithEmailAndPassword=function(e,n){return t.auth.createUserWithEmailAndPassword(e,n)},this.doSignInWithEmailAndPassword=function(e,n){return t.auth.signInWithEmailAndPassword(e,n)},this.doSignOut=function(){return t.auth.signOut()},this.doPasswordReset=function(e){return t.auth.sendPasswordResetEmail(e)},this.doPasswordUpdate=function(e){return t.auth.currentUser.updatePassword(e)},this.onAuthUserListener=function(e,n){return t.auth.onAuthStateChanged((function(a){a?t.user(a.uid).once("value").then((function(t){var n=t.val();a=Object(E.a)({uid:a.uid,email:a.email},n),e(a)})):n()}))},this.user=function(e){return t.db.ref("users/".concat(e))},this.users=function(){return t.db.ref("users")},S.a.initializeApp(w),this.auth=S.a.auth(),this.db=S.a.database()},y=function(e){var t=function(t){function n(e){var t;return Object(c.a)(this,n),(t=Object(h.a)(this,Object(p.a)(n).call(this,e))).state={authUser:JSON.parse(localStorage.getItem("authUser"))},t}return Object(d.a)(n,t),Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.listener=this.props.firebase.onAuthUserListener((function(t){localStorage.setItem("authUser",JSON.stringify(t)),e.setState({authUser:t})}),(function(){localStorage.removeItem("authUser"),e.setState({authUser:null})}))}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){return r.a.createElement(i.Provider,{value:this.state.authUser},r.a.createElement(e,this.props))}}]),n}(r.a.Component);return b(t)},N=n(20),C=function(e){return function(t){var n=function(n){function a(){return Object(c.a)(this,a),Object(h.a)(this,Object(p.a)(a).apply(this,arguments))}return Object(d.a)(a,n),Object(m.a)(a,[{key:"componentDidMount",value:function(){var t=this;this.listener=this.props.firebase.onAuthUserListener((function(n){e(n)||t.props.history.push("/")}),(function(){return t.props.history.push("/")}))}},{key:"componentWillUnmount",value:function(){this.listener()}},{key:"render",value:function(){var n=this;return r.a.createElement(i.Consumer,null,(function(a){return e(a)?r.a.createElement(t,n.props):null}))}}]),a}(r.a.Component);return Object(N.a)(u.e,b)(n)}},j=function(){return r.a.createElement("ul",{className:"nav"},r.a.createElement("li",null,r.a.createElement(o.b,{to:"/",className:"logo"},r.a.createElement("img",{src:"/images/logo.svg"}))),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/game"},"Play")),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/account"},"Account")))},I=function(){return r.a.createElement("ul",{className:"nav"},r.a.createElement("li",null,r.a.createElement(o.b,{to:"/",className:"logo"},r.a.createElement("img",{src:"/images/logo.svg"}))),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/signin",className:"button-primery"},"Sign In")))},k=function(){return r.a.createElement("div",null,r.a.createElement(i.Consumer,null,(function(e){return e?r.a.createElement(j,null):r.a.createElement(I,null)})))},A=JSON.parse(localStorage.getItem("results"))||[],U=[],J=[],P=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(h.a)(this,Object(p.a)(t).call(this,e))).state={loading:!1,users:[]},n}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),U=A.sort((function(e,t){return t.wins-e.wins})).slice(0,25),this.props.firebase.users().on("value",(function(t){var n=t.val(),a=Object.keys(n).map((function(e){return Object(E.a)({},n[e],{uid:e})}));e.setState({users:a,loading:!1})}))}},{key:"componentWillUnmount",value:function(){this.props.firebase.users().off()}},{key:"render",value:function(){for(var e=this.state,t=e.users,n=e.loading,a=0;a<U.length;a++)for(var s=0;s<t.length;s++)U[a].uid!==t[s].uid||J.find((function(e){return e.uid===t[s].uid}))||(t[s].wins=U[a].wins,J.push(t[s]));return r.a.createElement("div",{className:"landing"},r.a.createElement("h1",null,"Bulls And Cows Championship"),r.a.createElement("p",null),r.a.createElement("div",{className:"box-res"},n&&r.a.createElement("div",{className:"lds-ring"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)),r.a.createElement(M,{users:J})))}}]),t}(a.Component),M=function(e){var t=e.users;return r.a.createElement("ol",null,t.map((function(e){return r.a.createElement("li",{key:e.uid},r.a.createElement("strong",null,e.username),r.a.createElement("span",{className:"right"},e.wins," wins"))})))},x=b(P),B=n(15),W={username:"",email:"",passwordOne:"",passwordTwo:"",error:null},D=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(h.a)(this,Object(p.a)(t).call(this,e))).onSubmit=function(e){var t=n.state,a=t.username,r=t.email,s=t.passwordOne;n.props.firebase.doCreateUserWithEmailAndPassword(r,s).then((function(e){return n.props.firebase.user(e.user.uid).set({username:a,email:r})})).then((function(){n.setState(Object(E.a)({},W)),n.props.history.push("/account")})).catch((function(e){n.setState({error:e})})),e.preventDefault()},n.onChange=function(e){n.setState(Object(B.a)({},e.target.name,e.target.value))},n.state=Object(E.a)({},W),n}return Object(d.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state,t=e.username,n=e.email,a=e.passwordOne,s=e.passwordTwo,l=e.error,o=a!==s||""===a||""===n||""===t;return r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("input",{name:"username",value:t,onChange:this.onChange,type:"text",placeholder:"Full Name"}),r.a.createElement("input",{name:"email",value:n,onChange:this.onChange,type:"text",placeholder:"Email Address"}),r.a.createElement("input",{name:"passwordOne",value:a,onChange:this.onChange,type:"password",placeholder:"Password"}),r.a.createElement("input",{name:"passwordTwo",value:s,onChange:this.onChange,type:"password",placeholder:"Confirm Password"}),r.a.createElement("button",{className:"button-primery",disabled:o,type:"submit"},"Sign Up"),l&&r.a.createElement("p",null,l.message))}}]),t}(a.Component),_=function(){return r.a.createElement("p",null,"Don't have an account? ",r.a.createElement(o.b,{to:"/signup"},"Sign Up"))},F=Object(u.e)(b(D)),R=function(){return r.a.createElement("div",{className:"signForm"},r.a.createElement("h1",null,"SignUp"),r.a.createElement(F,null))},L={email:"",password:"",error:null,rememberMe:!1},T=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(h.a)(this,Object(p.a)(t).call(this,e))).onSubmit=function(e){var t=n.state,a=t.email,r=t.password,s=t.rememberMe;n.props.firebase.doSignInWithEmailAndPassword(a,r).then((function(){n.setState(Object(E.a)({},L)),n.props.history.push("/game")})).catch((function(e){n.setState({error:e})})),localStorage.setItem("rememberMe",s),localStorage.setItem("email",s?a:""),localStorage.setItem("password",s?r:""),e.preventDefault()},n.onChange=function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value;n.setState(Object(B.a)({},t.name,a))},n.state=Object(E.a)({},L),n}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e="true"===localStorage.getItem("rememberMe"),t=e?localStorage.getItem("email"):"",n=e?localStorage.getItem("password"):"";this.setState({email:t,password:n,rememberMe:e})}},{key:"render",value:function(){var e=this.state,t=e.email,n=e.password,a=e.error,s=""===n||""===t;return r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("input",{name:"email",value:t,onChange:this.onChange,type:"text",placeholder:"Email Address"}),r.a.createElement("input",{name:"password",value:n,onChange:this.onChange,type:"password",placeholder:"Password"}),r.a.createElement("button",{className:"button-primery",disabled:s,type:"submit"},"Sign In"),r.a.createElement("label",null,r.a.createElement("input",{name:"rememberMe",checked:this.state.rememberMe,onChange:this.onChange,type:"checkbox"})," Remember me"),a&&r.a.createElement("p",null,a.message))}}]),t}(a.Component),z=Object(N.a)(u.e,b)(T),Q=function(){return r.a.createElement("div",{className:"signForm"},r.a.createElement("h1",null,"SignIn"),r.a.createElement(z,null),r.a.createElement(_,null))},Y=n(37),Z=JSON.parse(localStorage.getItem("attemptsArray"))||[],G=(JSON.parse(localStorage.getItem("secretNum")),JSON.parse(localStorage.getItem("guessNum")),JSON.parse(localStorage.getItem("results"))||[]),H=(JSON.parse(localStorage.getItem("gameW")),{guessNumber:"",secretNumber:JSON.parse(localStorage.getItem("secretNum"))||Math.random().toString().slice(2,6),attempts:[],gameWon:!1}),K=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(h.a)(this,Object(p.a)(t).call(this))).__handleInputChange=function(t){t.target.value.length<=4&&e.setState({guessNumber:t.target.value})},e.__checkAnswer=function(t){t.preventDefault();var n=e.state,a=n.guessNumber,r=n.secretNumber;console.log(r);if(/^\d{4}$/.test(a)){var s=[],l=[],o=0,u=0;s=r.split(""),l=a.split(""),s.forEach((function(e,t){s[t]===l[t]&&(o+=1,s[t]="X",l[t]="Z")})),s.forEach((function(e,t){s.indexOf(l[t])>=0&&(s[s.indexOf(l[t])]="",u+=1)}));var i={key:Date.now(),content:a,bullsCount:o,cowsCount:u};if(localStorage.setItem("secretNum",JSON.stringify(r)),Z.push(i),localStorage.setItem("attemptsArray",JSON.stringify(Z)),4===o){JSON.parse(localStorage.getItem("authUser"));localStorage.removeItem("secretNum"),localStorage.removeItem("attemptsArray"),localStorage.removeItem("guessNum");var c=JSON.parse(localStorage.getItem("authUser")).uid,m=G.find((function(e){return e.uid===c}));if(m){var h=[m={uid:m.uid,wins:parseInt(m.wins)+1}],p=G.map((function(e){return h.find((function(t){return t.uid===e.uid}))||e}));G=p}else{var d={uid:c,wins:1};G.push(d)}localStorage.setItem("results",JSON.stringify(G)),e.setState({gameWon:!0})}e.setState((function(e){return{guessNumber:"",attempts:[i].concat(Object(Y.a)(e.attempts))}}))}},e.state=Object(E.a)({},H),e}return Object(d.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("guessNum"))||"",t=JSON.parse(localStorage.getItem("secretNum"))||"",n=(JSON.parse(localStorage.getItem("attemptsArray"))||[]).reverse();this.setState({guessNumber:e,secretNum:t,attempts:n})}},{key:"render",value:function(){var e=this.state,t=e.guessNumber,n=e.attempts,a=e.gameWon,s=n.length>0?n.map((function(e){return r.a.createElement("div",{className:"numbox",key:e.key},r.a.createElement("h2",null,e.content),r.a.createElement("p",null,e.bullsCount," ",0!=e.bullsCount.length?"Bulls":"Bull"," & ",e.cowsCount," ",0!=e.cowsCount.length?"Cows":"Cow"," "))})):"";function l(){window.location.reload()}return r.a.createElement("div",null,a?r.a.createElement(i.Consumer,null,(function(e){return r.a.createElement("div",{className:"win"},r.a.createElement("h1",null,"Congratulations ",e.username,"!"),r.a.createElement("h1",null,"You won the game!"),r.a.createElement("button",{onClick:l,className:"button-primery"},"New Game"))})):r.a.createElement("div",null,r.a.createElement("form",{noValidate:!0,autoComplete:"off",onSubmit:this.__checkAnswer},r.a.createElement("input",{type:"number",placeholder:"0000",onFocus:function(e){return e.target.placeholder=""},onBlur:function(e){return e.target.placeholder="0000"},value:t,onChange:this.__handleInputChange})),s))}}]),t}(a.Component),V=C((function(e){return!!e}))((function(){return r.a.createElement("div",{className:"inner-wrap"},r.a.createElement("h1",null,"Bulls And Cows"),r.a.createElement("p",null,"Bulls Cows (also known as Cows and Bulls, Pigs and Bulls, Bulls and Cleots or Mastermind) is a number guessing game. In some countries is played with colors or words but in this version you must break the code with numbers. At the start of the game the computer generates a random number. You must guess that number. Every of your choices gives you bulls and cows. Every bull is a guessed digit in the original number and every cow is a guessed digit but misplaced. For instance if the random number is 259 and you guessed 329, result is 1 Bull (digit 9) and 1 Cow (digit 2). Enjoy!"),r.a.createElement(K,null))})),X=b((function(e){var t=e.firebase;return r.a.createElement("button",{type:"button",className:"btn-inverted",onClick:t.doSignOut},"Sign Out")})),$=C((function(e){return!!e}))((function(){return r.a.createElement(i.Consumer,null,(function(e){return r.a.createElement("div",{className:"inner-wrap"},r.a.createElement("h1",null,"Hello ",e.username,"!"),r.a.createElement("h3",null,"E-mail: ",e.email),r.a.createElement(X,null))}))})),q=y((function(){return r.a.createElement(o.a,null,r.a.createElement("div",{className:"wrapper"},r.a.createElement(k,null),r.a.createElement(u.a,{exact:!0,path:"/",component:x}),r.a.createElement(u.a,{path:"/signup",component:R}),r.a.createElement(u.a,{path:"/signin",component:Q}),r.a.createElement(u.a,{path:"/game",component:V}),r.a.createElement(u.a,{path:"/account",component:$})))}));l.a.render(r.a.createElement(f.Provider,{value:new O},r.a.createElement(q,null)),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.a401afd4.chunk.js.map